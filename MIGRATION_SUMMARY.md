# üìù –ú–∏–≥—Ä–∞—Ü–∏—è –Ω–∞ PostgreSQL ‚Äî –ò—Ç–æ–≥–∏

## ‚úÖ –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ

### 1. **database.py** ‚Äî –ø–æ–ª–Ω–∞—è –ø–µ—Ä–µ–ø–∏—Å–∫–∞ –Ω–∞ PostgreSQL
- ‚ùå –£–±—Ä–∞–Ω–æ: `sqlite3`
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ: `psycopg2` (–±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å PostgreSQL)
- –í—Å–µ –º–µ—Ç–æ–¥—ã –ø–µ—Ä–µ–ø–∏—Å–∞–Ω—ã: `add_attempt()`, `get_stats()`, `get_recent_attempts()`, `is_ip_blocked()`, `add_ip_block()`, `get_blocked_ips()`
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –æ–∫—Ä—É–∂–µ–Ω–∏—è `DATABASE_URL`

### 2. **server.py** ‚Äî –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π
- –°–µ—Ä–≤–µ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –ë–î —á–µ—Ä–µ–∑ –∏–º–ø–æ—Ä—Ç `from database import db`
- –ù–µ –Ω—É–∂–Ω–æ –º–µ–Ω—è—Ç—å –∫–æ–¥, —Ç–∞–∫ –∫–∞–∫ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –æ—Å—Ç–∞–ª—Å—è –ø—Ä–µ–∂–Ω–∏–º

### 3. **desktop_app.py** ‚Äî –æ–±–Ω–æ–≤–ª—ë–Ω URL –Ω–∞ Render
- `http://localhost:8000` ‚Üí `https://diplom-cyber-security.onrender.com`
- –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ç–µ–ø–µ—Ä—å –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–ø—Ä–æ—Å—ã –Ω–∞ —É–¥–∞–ª—ë–Ω–Ω—ã–π —Å–µ—Ä–≤–µ—Ä

### 4. **requirements.txt** + **pyproject.toml** 
- –î–æ–±–∞–≤–ª–µ–Ω–æ: `psycopg2-binary>=2.9.0`
- –í—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Å—Ç–∞–ª–∏—Å—å –ø—Ä–µ–∂–Ω–∏–º–∏

### 5. **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**
- ‚úÖ `POSTGRES_SETUP.md` ‚Äî –ø–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ PostgreSQL
- ‚úÖ `.env.example` ‚Äî –ø—Ä–∏–º–µ—Ä –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
- ‚úÖ `README.md` ‚Äî –æ–±–Ω–æ–≤–ª–µ–Ω–æ —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –ë–î

## üöÄ –ß—Ç–æ –¥–∞–ª—å—à–µ

### –®–∞–≥ 1: –ù–∞ Render (Production)

```bash
# –í –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ Render:
1. –û—Ç–∫—Ä–æ–π—Ç–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π —Å–µ—Ä–≤–∏—Å "crypto-vis-api"
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ Settings ‚Üí Environment
3. –ù–∞–∂–º–∏—Ç–µ "Add Environment Variable"
4. DATABASE_URL = postgresql://[—Å–∫–æ–ø–∏—Ä—É–π—Ç–µ –∏–∑ PostgreSQL —Å–µ—Ä–≤–∏—Å–∞]
5. –ù–∞–∂–º–∏—Ç–µ Deploy
```

### –®–∞–≥ 2: –õ–æ–∫–∞–ª—å–Ω–æ (Development)

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ PostgreSQL –ª–æ–∫–∞–ª—å–Ω–æ, –∑–∞—Ç–µ–º:
export DATABASE_URL="postgresql://user:password@localhost:5432/login_monitor"
python -m uvicorn server:app --reload
```

### –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä–∫–∞

```bash
# –¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ —á–µ—Ä–µ–∑ API:
curl "https://diplom-cyber-security.onrender.com/api/stats"
```

## üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ë–î

### login_attempts (–ø–æ–ø—ã—Ç–∫–∏ –≤—Ö–æ–¥–∞)
```sql
id, username, ip_address, country, client_type, 
success, reason, attempt_time, user_agent, metadata
```

### ip_blocks (–∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ IP)
```sql
id, ip_address, reason, blocked_until, is_permanent, created_at
```

## üîÑ –ú–∏–≥—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

**–ï—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å —Å—Ç–∞—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ SQLite:**

```python
# –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ –∏–∑ —Å—Ç–∞—Ä–æ–π –ë–î –∏ –∏–º–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ –≤ PostgreSQL
# –°–∫—Ä–∏–ø—Ç –º–∏–≥—Ä–∞—Ü–∏–∏ –º–æ–∂–Ω–æ –Ω–∞–ø–∏—Å–∞—Ç—å –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏

# –ü–æ–∫–∞ —á—Ç–æ –Ω–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –±—É–¥—É—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å—Å—è –≤ PostgreSQL
```

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã

1. **SQLite —Ñ–∞–π–ª `login_attempts.db` –±–æ–ª—å—à–µ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è** ‚Äî –º–æ–∂–Ω–æ —É–¥–∞–ª–∏—Ç—å
2. **–ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è `DATABASE_URL` –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞** –¥–ª—è —Ä–∞–±–æ—Ç—ã
3. **–î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è 365 –¥–Ω–µ–π** –Ω–∞ –±–µ—Å–ø–ª–∞—Ç–Ω–æ–º –ø–ª–∞–Ω–µ Render
4. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ä–µ–∑–µ—Ä–≤–Ω—ã–µ –∫–æ–ø–∏–∏** –∫–∞–∂–¥—ã–π –¥–µ–Ω—å

## üìö –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- [Render PostgreSQL](https://render.com/docs/databases)
- [psycopg2 –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](https://www.psycopg.org/)
- [PostgreSQL tutorial](https://www.postgresql.org/docs/)

---

**–ú–∏–≥—Ä–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞!** üéâ
